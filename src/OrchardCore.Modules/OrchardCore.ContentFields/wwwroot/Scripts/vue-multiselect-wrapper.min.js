!function(){document.querySelectorAll(".vue-multiselect").forEach(function(e){var t,n,s,a,r=e.id,u=e.dataset.editorType,o=JSON.parse(e.dataset.selectedItems||"[]"),c=e.dataset.tenantPath,d=e.dataset.searchUrl,l=JSON.parse(e.dataset.multiple),f=(t=function(e,t){e.isLoading=!0;var n=c+"/"+d;t&&(n+="&query="+t),fetch(n).then(function(t){t.json().then(function(t){e.options=t,e.isLoading=!1})})},n=250,function(){var e=this,i=arguments,r=s&&!a;clearTimeout(a),a=setTimeout(function(){a=null,s||t.apply(e,i)},n),r&&t.apply(e,i)}),m=Vue.component("vue-multiselect",window.VueMultiselect.default),h=new Vue({el:"#"+r,components:{"vue-multiselect":m},data:{value:null,arrayOfItems:o,options:[]},computed:{selectedIds:function(){return this.arrayOfItems.map(function(e){return e.id}).join(",")},isDisabled:function(){return this.arrayOfItems.length>0&&!l}},watch:{selectedIds:function(){setTimeout(function(){$(document).trigger("contentpreview:render")},100)}},created:function(){this.asyncFind()},methods:{asyncFind:function(e){f(this,e)},onSelect:function(e,t){for(i=0;i<this.arrayOfItems.length;i++)if(this.arrayOfItems[i].id===e.id)return;this.arrayOfItems.push(e)},remove:function(e){this.arrayOfItems.splice(this.arrayOfItems.indexOf(e),1)}}}),p=new CustomEvent("vue-multiselect-created",{detail:{vm:h,editorType:u}});document.querySelector("body").dispatchEvent(p)})}();
